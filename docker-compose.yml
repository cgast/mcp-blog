services:
  mcp-blog:
    build: .
    expose:
      - "3000"
      - "3001"
    volumes:
      - posts_data:/data/posts
    environment:
      - BLOG_TITLE=${BLOG_TITLE:-MCP Blog}
      - BLOG_DESCRIPTION=${BLOG_DESCRIPTION:-A blog managed by AI via MCP}
      - BLOG_BASE_URL=${BLOG_BASE_URL:-http://localhost:3000}
      - MCP_API_TOKEN=${MCP_API_TOKEN:-}
      - POSTS_DIR=/data/posts
      - WEB_PORT=3000
      - MCP_PORT=3001
    healthcheck:
      test: ["CMD", "wget", "-qO-", "http://localhost:3000/health"]
      interval: 10s
      timeout: 5s
      start_period: 15s
      retries: 3
    restart: unless-stopped

volumes:
  posts_data:
